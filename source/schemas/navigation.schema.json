{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://vtex.com/schemas/navigation.json",
  "title": "VTEX Documentation Navigation Schema",
  "description": "Schema for VTEX documentation portal navigation structure",
  "type": "object",
  "required": ["navbar"],
  "additionalProperties": false,
  "properties": {
    "navbar": {
      "type": "array",
      "description": "Top-level navigation sections",
      "minItems": 1,
      "items": {
        "$ref": "#/definitions/navbarItem"
      }
    }
  },
  "definitions": {
    "navbarItem": {
      "type": "object",
      "description": "A top-level navigation section",
      "required": ["documentation", "name", "slugPrefix", "categories"],
      "additionalProperties": false,
      "properties": {
        "documentation": {
          "type": "string",
          "description": "Identifier for the documentation section",
          "examples": ["tracks", "tutorials", "announcements", "faq", "known-issues", "troubleshooting"]
        },
        "name": {
          "$ref": "#/definitions/localizedString",
          "description": "Localized name of the section"
        },
        "slugPrefix": {
          "type": "string",
          "description": "URL prefix for this section",
          "examples": ["docs/tracks", "docs/tutorials"]
        },
        "categories": {
          "type": "array",
          "description": "Categories within this section",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/navigationNode"
          }
        }
      }
    },
    "navigationNode": {
      "type": "object",
      "description": "A navigation node that can be either a category or a document",
      "required": ["name", "slug", "type", "children"],
      "additionalProperties": false,
      "properties": {
        "name": {
          "$ref": "#/definitions/localizedString",
          "description": "Localized name of the node"
        },
        "slug": {
          "oneOf": [
            { "$ref": "#/definitions/localizedString" },
            { "type": "string" }
          ],
          "description": "URL slug for this node (localized object is preferred)"
        },
        "origin": {
          "type": "string",
          "description": "Origin field (typically empty)",
          "default": ""
        },
        "type": {
          "type": "string",
          "enum": ["category", "markdown"],
          "description": "Type of node: 'category' for containers, 'markdown' for documents"
        },
        "children": {
          "type": "array",
          "description": "Child nodes (categories or documents)",
          "items": {
            "$ref": "#/definitions/navigationNode"
          }
        }
      },
      "allOf": [
        {
          "if": { "properties": { "type": { "const": "category" } } },
          "then": {
            "properties": {
              "slug": { "$ref": "#/definitions/localizedString" },
              "children": { "type": "array", "minItems": 1 }
            }
          }
        },
        {
          "if": { "properties": { "type": { "const": "markdown" } } },
          "then": {
            "properties": {
              "slug": { "$ref": "#/definitions/localizedString" },
              "children": { "type": "array", "maxItems": 0 }
            }
          }
        }
      ]
    },
    "localizedString": {
      "type": "object",
      "description": "Object containing localized strings for different languages",
      "required": ["en", "es", "pt"],
      "properties": {
        "en": { "type": "string" },
        "es": { "type": "string" },
        "pt": { "type": "string" }
      },
      "additionalProperties": false
    }
  }
}
